<root>
  <includes>
    <item name="lv2common" />
  </includes>
  <level_gen>
    <nodes>
      <node name="house" show_layer_type="0" subchunk_type="1" width="1" height="1" weight="1.2" destroyweight="3" shakeweightcoef="1" absorbshakestrength="10000" destroybalance="0.35" imbalancetime="1"
           weightperwidth="1.2" destroyweightperwidth="3" shakedmg="1" shakedmgperwidth="1" destroyshake="1" destroyshakepersize="1" prefab="data/blocks/lv2/house.pf">
        <metadata minx="2" miny="2" maxx="16" maxy="16">
          <types>
            <item name="0" value="0" />
            <item name="1" />
            <item name="2" chain_type2="0" />
            <item name="2_0" chain_type2="0" />
            <item name="2_1" chain_type2="0" />
            <item name="2_2" chain_type2="0" />
            <item name="2_3" chain_type2="0" />
            <item name="2_4" chain_type2="0" />
          </types>
        </metadata>
        <types>4</types>
        <subitem copy_blueprint="2">
          <node type="subregion">
            <node type="switch_tile" x="0" y="0" w="0" h="0">
              <ref name="block0" case="2" />
              <ref name="block0" case="2_0" />
              <ref name="block0" case="2_1" />
              <ref name="block0" case="2_2" />
              <ref name="block0" case="2_3" />
              <ref name="block0" case="2_4" />
              <ref name="house_broken_a" />
            </node>
            <node type="filltag" gen_data_name="1" tag="10" x="0" y="0" w="0" h="0" />
            <node type="filltag" gen_data_name="2" block_type="0" tag="20" x="0" y="0" w="0" h="0" />
            <node type="filltag" gen_data_name="2_0" block_type="0" tag="20" x="0" y="0" w="0" h="0" />
            <node type="filltag" gen_data_name="2_1" block_type="0" tag="20" x="0" y="0" w="0" h="0" />
            <node type="filltag" gen_data_name="2_2" block_type="0" tag="20" x="0" y="0" w="0" h="0" />
            <node type="filltag" gen_data_name="2_3" block_type="0" tag="20" x="0" y="0" w="0" h="0" />
            <node type="filltag" gen_data_name="2_4" block_type="0" tag="20" x="0" y="0" w="0" h="0" />
          </node>
        </subitem>
        <next_level>
          <node type="subregion">
            <ref name="edge1_0" x="0" y="0" w="0" h="0" />
            <ref name="edge1_0a" x="0" y="0" w="0" h="0" />
            <ref name="edge1_1" x="0" y="0" w="0" h="0" />
            <ref name="edge1_1a" x="0" y="0" w="0" h="0" />
            <node type="autofill" check_gen_data_name="2_0" x="0" y="0" w="0" h="0">
              <ref name="house_entrance_0" sizeminx="1" sizeminy="2" />
            </node>
            <node type="autofill" check_gen_data_name="2_1" x="0" y="0" w="0" h="0">
              <ref name="house_entrance_1" sizeminx="2" sizeminy="1" />
            </node>
            <node type="autofill" check_gen_data_name="2_2" x="0" y="0" w="0" h="0">
              <ref name="house_entrance_2" sizeminx="1" sizeminy="2" />
            </node>
            <node type="autofill" check_gen_data_name="2_3" x="0" y="0" w="0" h="0">
              <ref name="house_entrance_3" sizeminx="2" sizeminy="2" />
            </node>
            <node type="autofill" check_gen_data_name="2_4" x="0" y="0" w="0" h="0">
              <ref name="house_entrance_4" sizeminx="2" sizeminy="2" />
            </node>

            <node type="randomfill" check_gen_data_name="1" x="0" y="0" w="0" h="0" >
              <ref name="house_window" sizeminx="2" sizeminy="2" p="1" weight_group="0" />
              <ref name="house_window" sizeminx="3" sizeminy="1" sizemaxx="5" p="1" weight_group="0" />
              <ref name="house_window" sizeminx="1" sizeminy="3" sizemaxy="5" p="1" weight_group="0" />
              <node type="empty" p="4" />
            </node>
          </node>
        </next_level>
      </node>

      <node name="room" show_layer_type="0" movetype="1" isroom="1" width="1" height="1" weight="1.2" destroyweight="3" shakeweightcoef="1" absorbshakestrength="10000" destroybalance="0.35" imbalancetime="1"
           weightperwidth="1.2" destroyweightperwidth="3" shakedmg="1" shakedmgperwidth="1" destroyshake="1" destroyshakepersize="1" prefab="data/blocks/lv2/room.pf">
        <metadata minx="4" miny="4" maxx="16" maxy="16">
          <types>
            <item name="0" value="0" />
            <item name="1" />
            <item name="2" chain_type2="0" />
            <item name="door" chain_type2="0" />
            <item name="car_0" />
            <item name="car_2" />
            <item name="car_3" />
          </types>
        </metadata>
        <types>4</types>
        <subitem copy_blueprint="2">
          <node type="subregion">
            <node type="autofill" check_gen_data_name="0" x="0" y="0" w="0" h="0">
              <ref name="house" sizeminx="2" sizeminy="2" sizemaxx="32" sizemaxy="32" />
            </node>
            
            <node type="switch_tile" x="0" y="0" w="0" h="0">
              <ref name="block0" case="2" />
              <ref name="block0" case="door" />
              <ref name="house_broken_a" case="1" />
              <ref name="block0" case="car_0" />
              <ref name="block0" case="car_2" />
              <ref name="block0" case="car_3" />
            </node>
            <node type="autofill" check_gen_data_name="door" x="1" y="0" w="-1" h="1">
              <ref name="door1_0" sizeminx="2" sizeminy="1" />
              <ref name="door1s_0" sizeminx="1" sizeminy="1" />
            </node>
            <node type="autofill" check_gen_data_name="door" x="1" y="-1" w="-1" h="1">
              <ref name="door1_2" sizeminx="2" sizeminy="1" />
              <ref name="door1s_2" sizeminx="1" sizeminy="1" />
            </node>
            <node type="autofill" check_gen_data_name="door" x="0" y="1" w="1" h="-1">
              <ref name="door1_3" sizeminx="1" sizeminy="2" />
              <ref name="door1s_3" sizeminx="1" sizeminy="1" />
            </node>
            <node type="autofill" check_gen_data_name="door" x="-1" y="1" w="1" h="-1">
              <ref name="door1_1" sizeminx="1" sizeminy="2" />
              <ref name="door1s_1" sizeminx="1" sizeminy="1" />
            </node>
            <node type="filltag" gen_data_name="0" tag="10" x="0" y="0" w="0" h="0" />
            <node type="filltag" gen_data_name="1" tag="10" x="0" y="0" w="0" h="0" />
            <node type="filltag" gen_data_name="car_0" tag="10" x="0" y="0" w="0" h="0" />
            <node type="filltag" gen_data_name="car_2" tag="10" x="0" y="0" w="0" h="0" />
            <node type="filltag" gen_data_name="car_3" tag="10" x="0" y="0" w="0" h="0" />
            <node type="filltag" gen_data_name="2" block_type="0" tag="20" x="0" y="0" w="0" h="0" />
            <node type="filltag" gen_data_name="door" block_type="0" tag="20" x="0" y="0" w="0" h="0" />
          </node>
        </subitem>
        <next_level>
          <node type="subregion">
            <ref name="edge1_2" x="0" y="0" w="0" h="0" />
            <node type="simple_spawn" name="thug" prefab="data/enemies/thug.pf" check_gen_data_name="2" sizex="-4" sizey="-16" sizewidth="8" sizeheight="32" countpergrid="0.08"
                  x="1" y="1" w="-1" h="-1" />

            <node type="autofill" check_gen_data_name="car_0" x="0" y="0" w="0" h="0">
              <node type="switch" str="is_bonus" sizeminx="4" sizeminy="2">
                <ref name="car_pt_spawner_0" case="1" />
                <ref name="car1_spawner_0" />
              </node>
            </node>
            <node type="autofill" check_gen_data_name="car_2" x="0" y="0" w="0" h="0">
              <node type="switch" str="is_bonus" sizeminx="4" sizeminy="2">
                <ref name="car_pt_spawner_2" case="1" />
                <ref name="car1_spawner_2" />
              </node>
            </node>
            <node type="autofill" check_gen_data_name="car_3" x="0" y="0" w="0" h="0">
              <node type="switch" str="is_bonus" sizeminx="2" sizeminy="4">
                <ref name="car_pt_spawner_3" case="1" />
                <ref name="car1_spawner_3" />
              </node>
              <ref name="car1_spawner_3" sizeminx="2" sizeminy="4" />
            </node>
          </node>
        </next_level>
      </node>

      <node name="cargo1" width="1" height="1" weight="1.2" destroyweight="3" shakeweightcoef="1" absorbshakestrength="10000" destroybalance="0.35" imbalancetime="1"
           weightperwidth="1.2" destroyweightperwidth="3" shakedmg="1" shakedmgperwidth="1" destroyshake="1" destroyshakepersize="1" prefab="data/blocks/lv2/cargo1.pf">
        <metadata minx="2" miny="2" maxx="16" maxy="16" />
        <types>4</types>
        <subitem>
          <node type="tile">
            <node type="randompick">
              <ref name="metal_broken" p="1" />
              <node type="empty" p="1" />
            </node>
          </node>
        </subitem>
        <next_level>
          <node type="subregion">
            <ref name="text_ss" x="0" y="0" w="0" h="0" />
          </node>
        </next_level>
      </node>

      <node name="billboard" type="billboard" show_layer_type="0" width="4" height="4" weight="2" weightperwidth="1" destroyweight="33" shakeweightcoef="1" absorbshakestrength="10000" destroyshake="20" shakedmg="20" prefab="data/blocks/lv2/billboard.pf">
        <metadata minx="4" miny="4" maxx="32" maxy="16" />
        <types>
          0,0,0,0,
          0,0,0,0,
          0,0,0,0,
          0,0,0,0,
        </types>
        <nodes>
          <ref name="platform" />
        </nodes>
        <subitem>
          <node type="subregion">
            <node type="tile" x="0" y="0" w="0" h="0">
              <ref name="metal_wall_broken" />
            </node>
          </node>
        </subitem>
        <next_level>
          <node type="subregion">
            <ref name="billboard_frame" x="0" y="0" w="0" h="0" />
          </node>
        </next_level>
      </node>
      
    </nodes>
  </level_gen>
</root>