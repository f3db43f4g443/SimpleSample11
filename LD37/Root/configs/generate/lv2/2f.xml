<root>
  <includes>
    <item name="lv1/lv1common" />
    <item name="lv2common" />
  </includes>
  <level_gen>
    <attachs>
      <node name="window2x2_1" prefab="data/blockitems/window2x2_1.pf" sizex="2" sizey="2" attach_type="0" />
      <node name="label_1f" prefab="data/blocks/lv2/barrier_label_1.pf" sizex="4" sizey="2" attach_type="0" />
      <node name="label_2f" prefab="data/blocks/lv2/barrier_label_2.pf" sizex="4" sizey="2" attach_type="0" />
    </attachs>
    <spawns>
      <node name="enemycharacter" prefab="data/enemies/man.pf" sizex="-4" sizey="-16" sizewidth="8" sizeheight="32" countpergrid="0.25" />
      <node name="floor_label_1" prefab="data/blocks/lv1/1.pf" />
      <node name="floor_label_2" prefab="data/blocks/lv1/2.pf" />
      <node name="floor_label_3" prefab="data/blocks/lv1/3.pf" />
      <node name="floor_label_4" prefab="data/blocks/lv1/4.pf" />
      <node name="floor_label_6" prefab="data/blocks/lv1/6.pf" />
      <node name="floor_label_8" prefab="data/blocks/lv1/8.pf" />
      <node name="floor_label_f" prefab="data/blocks/lv1/f.pf" />
    </spawns>
    <nodes>
      <node name="floor_broken" width="1" height="1" weight="10000" destroyweight="0" destroybalance="10" absorbshakestrength="0" imbalancetime="1" layer_type="1" prefab="data/blocks/lv2/floor_broken.pf">
        <metadata isdesignvalid="0" />
        <types>0</types>
        <immune_to_block_buff>1</immune_to_block_buff>
      </node>
      <node name="label_3f" width="4" height="2" weight="0" destroyweight="0" shakedmgthreshold="1000000" layer_type="2" subchunk_type="2" prefab="data/blocks/lv1/label_3f.pf">
        <metadata isdesignvalid="0" />
        <types>4,4,4,4,4,4,4,4</types>
      </node>

      <node name="stonebar_room_corner2" width="1" height="1" weight="0" destroyweight="0" shakedmgthreshold="1000000" layer_type="2" subchunk_type="2" prefab="data/blocks/lv1/stonebar_room_corner.pf">
        <metadata isdesignvalid="0" />
        <types>4</types>
      </node>
      <node name="stonebar_room_h2" width="8" height="1" weight="0" destroyweight="0" shakedmgthreshold="1000000" layer_type="2" subchunk_type="2" prefab="data/blocks/lv1/stonebar_room_h.pf">
        <metadata isdesignvalid="0" />
        <types>4,4,4,4,4,4,4,4</types>
        <subitem>
          <node type="tile">
            <ref name="stonebar_room_broken" />
          </node>
        </subitem>
      </node>
      <node name="stonebar_room_v2" width="1" height="4" weight="0" destroyweight="0" shakedmgthreshold="1000000" layer_type="2" subchunk_type="2" prefab="data/blocks/lv1/stonebar_room_v.pf">
        <metadata isdesignvalid="0" />
        <types>4,4,4,4</types>
        <subitem>
          <node type="tile">
            <ref name="stonebar_room_broken" />
          </node>
        </subitem>
      </node>

      <node name="lv2_floor_l" width="4" height="2" weight="0" destroyweight="0" shakedmgthreshold="1000000" layer_type="2" subchunk_type="2" prefab="data/blocks/lv2/floor_l.pf">
        <metadata isdesignvalid="0" />
        <types>4,4,4,4,4,4,4,4</types>
        <immune_to_block_buff>1,1,1,1,1,1,1,1</immune_to_block_buff>
      </node>
      <node name="lv2_floor_r" width="4" height="2" weight="0" destroyweight="0" shakedmgthreshold="1000000" layer_type="2" subchunk_type="2" prefab="data/blocks/lv2/floor_r.pf">
        <metadata isdesignvalid="0" />
        <types>4,4,4,4,4,4,4,4</types>
        <immune_to_block_buff>1,1,1,1,1,1,1,1</immune_to_block_buff>
      </node>

      <node name="lv2floor" width="32" height="2" weight="0" destroyweight="0" destroyshake="10"
            absorbshakestrength="10000" shakedmg="5" show_layer_type="0" prefab="data/blocks/lv2/floor.pf">
        <types>
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        </types>
        <immune_to_block_buff>
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        </immune_to_block_buff>
        <subitem>
          <node type="subregion">
            <ref name="lv2_floor_l" x="0" y="0" w="4" h="2" />
            <ref name="lv2_floor_r" x="28" y="0" w="4" h="2" />
            <node type="tile" x="0" y="0" w="0" h="0">
              <ref name="floor_broken" />
            </node>
          </node>
        </subitem>
      </node>
      
      <node name="reward_floor" width="32" height="8" weight="44" destroyweight="0" destroyshake="50" shakedmgthreshold="1000000"
            prefab="data/blocks/lv1/barrier_reward.pf" islevelbarrier="1" show_layer_type="0" levelbarrierheight="6">
        <types>
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        </types>
        <immune_to_block_buff>
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        </immune_to_block_buff>

        <subitem>
          <node type="subregion">
            <node type="tile" x="0" y="0" w="0" h="0">
              <ref name="floor_broken" />
            </node>
            <node type="tile" x="0" y="6" w="32" h="2">
              <ref name="unbreakable" />
            </node>
          </node>
        </subitem>
        <next_level>
          <node type="subregion">
            <ref name="wall_deco" x="0" y="0" w="0" h="0" />
            <ref name="pickup_templ_reward" x="3" y="3" w="2" h="2" />
            <ref name="pickup_templ_reward" x="11" y="3" w="2" h="2" />
            <ref name="pickup_templ_reward" x="19" y="3" w="2" h="2" />
            <ref name="pickup_templ_reward" x="27" y="3" w="2" h="2" />
          </node>
        </next_level>

      </node>
      
      <node name="box_barrier" movetype="1" width="1" height="1" weight="1" destroyweight="2" layer_type="2" prefab="data/blocks/lv2/box_barrier.pf">
        <types>4</types>
      </node>
      <node name="cargo_a_barrier" width="1" height="1" weight="1.2" subchunk_type="2" destroyweight="3" absorbshakestrength="3" absorbshakestrengthperheight="3"
           weightperwidth="1.2" destroyweightperwidth="3" shakedmg="2" shakedmgperwidth="2" destroyshake="1" destroyshakepersize="1" prefab="data/blocks/lv2/core_a.pf">
        <metadata isdesignvalid="0" minx="2" miny="2" maxx="16" maxy="16" />
        <types>4</types>
        <immune_to_block_buff>1</immune_to_block_buff>
      </node>
      <node name="cargo_b_barrier" width="1" height="1" weight="1.2" subchunk_type="2" destroyweight="3" absorbshakestrength="3" absorbshakestrengthperheight="3"
           weightperwidth="1.2" destroyweightperwidth="3" shakedmg="2" shakedmgperwidth="2" destroyshake="1" destroyshakepersize="1" prefab="data/blocks/lv2/core_b.pf">
        <metadata isdesignvalid="0" minx="2" miny="2" maxx="16" maxy="16" />
        <types>4</types>
        <immune_to_block_buff>1</immune_to_block_buff>
      </node>
      <node name="cargo_c_barrier" width="1" height="1" weight="1.2" subchunk_type="2" destroyweight="3" absorbshakestrength="3" absorbshakestrengthperheight="3"
           weightperwidth="1.2" destroyweightperwidth="3" shakedmg="2" shakedmgperwidth="2" destroyshake="1" destroyshakepersize="1" prefab="data/blocks/lv2/core_c.pf">
        <metadata isdesignvalid="0" minx="2" miny="2" maxx="16" maxy="16" />
        <types>4</types>
        <immune_to_block_buff>1</immune_to_block_buff>
      </node>
      <node name="cargo_d_barrier" width="1" height="1" weight="1.2" subchunk_type="2" destroyweight="3" absorbshakestrength="3" absorbshakestrengthperheight="3"
           weightperwidth="1.2" destroyweightperwidth="3" shakedmg="2" shakedmgperwidth="2" destroyshake="1" destroyshakepersize="1" prefab="data/blocks/lv2/core_d.pf">
        <metadata isdesignvalid="0" minx="2" miny="2" maxx="16" maxy="16" />
        <types>4</types>
        <immune_to_block_buff>1</immune_to_block_buff>
      </node>
      <node name="cargo_barrier" type="randompick">
        <ref name="cargo_a_barrier" p="1" />
        <ref name="cargo_b_barrier" p="1" />
        <ref name="cargo_c_barrier" p="1" />
        <ref name="cargo_d_barrier" p="1" />
      </node>
      <node name="chunk_tile" type="subregion">
        <node type="randomfill" check_gen_data_name="mask" x="0" y="0" w="0" h="-2">
          <ref name="cargo_barrier" sizeminx="3" sizemaxx="4" sizeminy="3" p="0.6" />
          <ref name="cargo_barrier" sizeminx="2" sizemaxx="5" sizeminy="2" p="0.6" />
          <ref name="box_barrier" sizeminx="1" sizeminy="1" p="1" />
        </node>
        <node type="randomfill" check_gen_data_name="mask" x="0" y="-2" w="0" h="2">
          <ref name="box_barrier" sizeminx="1" sizeminy="1" p="1" />
        </node>
      </node>

      <node name="1f" type="barrier2" show_layer_type="0" width="32" height="8" weight="44" destroyweight="0" destroyshake="50" shakedmgthreshold="1000000" prefab="data/blocks/lv2/barrier.pf" islevelbarrier="1" levelbarrierheight="6">
        <types>
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        </types>
        <immune_to_block_buff>
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        </immune_to_block_buff>

        <subitem>
          <node type="subregion">
            <ref name="reward_floor" x="0" y="0" w="0" h="0"/>
          </node>
        </subitem>

        <label>
          <ref name="label_1f" />
        </label>
        <chunk>
          <ref name="chunk_tile" />
        </chunk>
        
      </node>

      <node name="2f" type="barrier2" show_layer_type="0" width="32" height="8" weight="44" destroyweight="0" destroyshake="50" shakedmgthreshold="1000000" prefab="data/blocks/lv2/barrier.pf" islevelbarrier="1" levelbarrierheight="6">
        <types>
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        </types>
        <immune_to_block_buff>
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        </immune_to_block_buff>

        <subitem>
          <node type="subregion">
            <ref name="reward_floor" x="0" y="0" w="0" h="0"/>
          </node>
        </subitem>

        <label>
          <ref name="label_2f" />
        </label>
        <chunk>
          <ref name="chunk_tile" />
        </chunk>
        
      </node>
      
      <node name="3f" width="32" show_layer_type="0" height="8" weight="44" destroyweight="0" destroyshake="50" shakedmgthreshold="1000000"
            prefab="data/blocks/lv1/barrier_reward.pf" islevelbarrier="1" levelbarrierheight="6">
        <types>
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        </types>

        <subitem>
          <node type="subregion">
            <node type="tile" x="0" y="0" w="0" h="0">
              <ref name="floor_broken" />
            </node>
            <node type="tile" x="0" y="6" w="14" h="2">
              <ref name="unbreakable" />
            </node>
            <ref name="label_3f" x="14" y="6" w="4" h="2" />
            <node type="tile" x="18" y="6" w="14" h="2">
              <ref name="unbreakable" />
            </node>
          </node>
        </subitem>
        <next_level>
          <node type="subregion">
            <ref name="wall_deco" x="0" y="0" w="0" h="0" />
            <ref name="pickup_templ_reward" x="3" y="3" w="2" h="2" />
            <ref name="pickup_templ_reward" x="11" y="3" w="2" h="2" />
            <ref name="pickup_templ_reward" x="19" y="3" w="2" h="2" />
            <ref name="pickup_templ_reward" x="27" y="3" w="2" h="2" />
          </node>
        </next_level>

      </node>
    
    </nodes>
  </level_gen>
</root>